<router-outlet></router-outlet>

<div *ngIf ="auth.user$ | async as user; else login">

  <div>
    <h1>
      Calsetto Covid-19 Map
    </h1>
  </div>

  <agm-map [latitude]="lat" [longitude]="lng"
  [zoom]="zoom"
  (mapDblClick)="mapDblClick($event)"
  [disableDoubleClickZoom]="true">

      <ng-container *ngFor="let covid of user$">
        <agm-marker 
        *ngIf="covid.confirmed > 0"
        [latitude]="covid.location.lat" 
        [longitude]="covid.location.lng"
        
        (markerClick) = "markerClick(infoWindow)">

              <agm-info-window #infoWindow>

                <strong>{{covid.countryregion}} {{covid.provincestate}}</strong>
                <p>Confirmados: {{covid.confirmed}}</p>
                <p>Muertos: {{covid.deaths}}</p>
                <p>Recuperdados: {{covid.recovered}}</p>
                
              </agm-info-window>

        </agm-marker>

    <agm-marker
    [latitude]="lat" 
    [longitude]="lng"
    
    [title]="'Aqui es donde estas'">

    </agm-marker>

    <agm-marker
    *ngFor="let locat of locat"
    [latitude]="locat.lat" 
    [longitude]="locat.lng"
    (markerClick) = "deleteLocat(locat)">

    </agm-marker>

  </ng-container>
</agm-map>

<div class="formGroup">
  <button type="button" (click)="auth.signOut()">
    Log out with Google
  </button>
</div>


</div>



<ng-template #login>

  <div class="formGroup">
    <button type="button" (click)= "auth.googleSignin()">
      Sign in with Google
    </button>
  </div>

</ng-template>